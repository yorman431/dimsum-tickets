{"version":3,"sources":["../../../../src/Popper/interaction.js","../../../../src/Popper/DSPopper.js","../../../../src/Overlay/DSOverlay.js","../../../../src/Popper/PopperContent.js","../../../../src/Backdrop/Backdrop.js","../../../../src/Popper/PopperImpl.js"],"names":["Interaction","CLICK","HOVER","interactions","DSPopper","containerProps","arrowGap","arrowSize","blockName","contentOffset","contentStyle","contentComponent","delayClose","delayOpen","interactionType","isOpen","onOpen","onClose","onPlacementChange","placement","Position","preventOverflow","showArrow","closeAnimationConfig","to","transform","opacity","config","delay","duration","openAnimationConfig","usePortal","triggerComponent","wrapExtraComponent","getTargetFromChildren","getContentFromChildren","modifiers","triggerRef","customPopper","renderReference","referenceNode","zIndex","PropTypes","events","OverlayContainer","inline","opened","DSOverlay","React","prevProps","this","event","document","e","onClickOutside","overlayStack","overlayIndex","hasClickedOverlay","elem","overlayRef","hasBackdrop","children","backDropZIndex","overlay","classProps","innerRef","Component","bool","Content","Keyframes","PopperContent","onContentDestroyed","ref","style","key","className","data-placement","getArrowStylesBySize","viewBox","d","arrowProps","scheduleUpdate","onMouseEnter","onMouseLeave","computedStyle","data-testid","native","onRest","state","states","open","from","close","animationStyle","getComponentFromProps","destroyed","referenceElement","PureComponent","BackdropTag","styled","type","props","Backdrop","onClick","func","PopperImpl","memoizeOne","interaction","referenceProps","handlers","handleTriggerClick","canClose","isOnTrigger","opening","prevPropIsOpen","clearTimeout","setTimeout","get","isFunction","popperData","componentInnerRef","compRef","mergeRefs","targetProps","getInteractionObject","allModifiers","offset","enabled","padding","boundariesElement","updatePopoverState","fn","order","triggerHandler","popperContentProps","Reference","content","nextProps","prevState"],"mappings":"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","file":"static/js/1.209c5a62.chunk.js","sourcesContent":["export const Interaction = {\n  CLICK: 'click',\n  HOVER: 'hover',\n};\n\nexport const interactions = [Interaction.CLICK, Interaction.HOVER];\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport PopperImpl from './PopperImpl';\nimport { Position } from './positions';\nimport { Interaction } from './interaction';\n\nconst DSPopper = ({\n  containerProps = {},\n  arrowGap = 8,\n  arrowSize = 6,\n  blockName = '',\n  contentOffset = null,\n  contentStyle = null,\n  contentComponent = () => null,\n  delayClose = 300,\n  delayOpen = 200,\n  interactionType = Interaction.CLICK,\n  isOpen = undefined, // if this is set DSPopper would be a controlled component if not, an uncontrolled one\n  onOpen = () => null,\n  onClose = () => null,\n  onPlacementChange = () => null,\n  placement = Position.BOTTOM,\n  preventOverflow = 'window',\n  showArrow = true,\n  closeAnimationConfig = {\n    to: { transform: 'scale(0.8)', opacity: '0' },\n    config: { delay: 80, duration: 80 },\n  },\n  openAnimationConfig = {\n    to: { transform: 'scale(1)', opacity: '1' },\n    config: { delay: 80, duration: 80 },\n  },\n  usePortal = true,\n  triggerComponent = () => null,\n  wrapExtraComponent = undefined,\n  getTargetFromChildren = () => null,\n  getContentFromChildren = () => null,\n  modifiers = {},\n  triggerRef = () => null,\n  children: customPopper,\n  renderReference = undefined,\n  referenceNode = undefined,\n  zIndex,\n}) => (\n  <PopperImpl\n    arrowGap={arrowGap}\n    arrowSize={arrowSize}\n    blockName={blockName}\n    closeAnimationConfig={closeAnimationConfig}\n    containerProps={containerProps}\n    contentComponent={contentComponent}\n    contentOffset={contentOffset}\n    contentStyle={contentStyle}\n    delayClose={delayClose}\n    delayOpen={delayOpen}\n    getContentFromChildren={getContentFromChildren}\n    getTargetFromChildren={getTargetFromChildren}\n    interactionType={interactionType}\n    isOpen={isOpen}\n    modifiers={modifiers}\n    onOpen={onOpen}\n    onClose={onClose}\n    onPlacementChange={onPlacementChange}\n    openAnimationConfig={openAnimationConfig}\n    placement={placement}\n    preventOverflow={preventOverflow}\n    referenceNode={referenceNode}\n    renderReference={renderReference}\n    showArrow={showArrow}\n    triggerComponent={triggerComponent}\n    triggerRef={triggerRef}\n    usePortal={usePortal}\n    wrapExtraComponent={wrapExtraComponent}\n    zIndex={zIndex}\n  >\n    {customPopper}\n  </PopperImpl>\n);\n\n// @deprecated: There's the NEW (not finished) popover that uses its own popper implementation.\nDSPopper.propTypes = {\n  containerProps: PropTypes.shape({}),\n  /** Space between the arrow and the popup */\n  arrowGap: PropTypes.number,\n  /** Arrow size */\n  arrowSize: PropTypes.number,\n  /** Bem blockname for the popper */\n  blockName: PropTypes.oneOfType([PropTypes.string, PropTypes.shape({})]),\n};\n\nexport { Interaction as PopperInteractions, Position as PopperPositions };\n\nexport default DSPopper;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { aggregatedClasses } from '@elliemae/ds-classnames';\nimport DSPortal from '../Portal';\nimport DSBackdrop from '../Backdrop';\n\nconst blockName = 'overlay';\n\nconst events = ['mousedown', 'touchstart'];\n\nconst OverlayContainer = aggregatedClasses('div')(\n  blockName,\n  null,\n  ({ usePortal, isOpen }) => ({\n    inline: !usePortal,\n    opened: isOpen,\n  }),\n);\n\nclass DSOverlay extends Component {\n  static overlayStack = [];\n  static defaultProps = {\n    isOpen: false,\n    usePortal: true,\n    hasBackdrop: false,\n    backDropZIndex: 2, // https://jira.elliemae.io/browse/PUI-1712\n    onClickOutside: () => null,\n  };\n  constructor(props) {\n    super(props);\n    this.overlayRef = React.createRef();\n\n    this.handleDocumentClick = this.handleDocumentClick.bind(this);\n  }\n\n  componentDidUpdate(prevProps) {\n    const { isOpen } = this.props;\n    if (isOpen !== prevProps.isOpen) {\n      if (isOpen) {\n        this.openOverlay();\n      } else {\n        this.closeOverlay();\n      }\n    }\n  }\n\n  addClickOutsideListeners() {\n    events.forEach(event => {\n      document.addEventListener(event, this.handleDocumentClick);\n    });\n  }\n\n  removeClickOutsideListeners() {\n    events.forEach(event => {\n      document.removeEventListener(event, this.handleDocumentClick);\n    });\n  }\n\n  handleDocumentClick(e) {\n    const { onClickOutside, isOpen } = this.props;\n    const { overlayStack } = DSOverlay;\n    const overlayIndex = overlayStack.indexOf(this);\n    const hasClickedOverlay = overlayStack\n      .slice(overlayIndex)\n      .some(({ overlayRef }) => {\n        const elem = overlayRef.current;\n        return elem && elem.contains(e.target) && !elem.isSameNode(e.target);\n      });\n\n    if (isOpen && !hasClickedOverlay) {\n      onClickOutside(e); // giving opportunity for callers to operate on the event.\n    }\n  }\n\n  openOverlay() {\n    this.addClickOutsideListeners();\n    DSOverlay.overlayStack.push(this);\n  }\n\n  closeOverlay() {\n    const { overlayStack } = DSOverlay;\n    const overlayIndex = overlayStack.indexOf(this);\n    this.removeClickOutsideListeners();\n    overlayStack.splice(overlayIndex, 1);\n  }\n\n  render() {\n    const {\n      usePortal,\n      isOpen,\n      hasBackdrop,\n      children,\n      backDropZIndex,\n    } = this.props;\n\n    if (!isOpen) return null;\n\n    const overlay = (\n      <OverlayContainer\n        classProps={{ usePortal, isOpen }}\n        innerRef={this.overlayRef}\n      >\n        {hasBackdrop && <DSBackdrop zIndex={backDropZIndex} />}\n        {children}\n      </OverlayContainer>\n    );\n\n    if (usePortal) {\n      return <DSPortal>{overlay}</DSPortal>;\n    }\n\n    return overlay;\n  }\n}\n\nDSOverlay.propTypes = {\n  backDropZIndex: PropTypes.number,\n  children: PropTypes.element,\n  hasBackdrop: PropTypes.bool,\n  isOpen: PropTypes.bool,\n  onClickOutside: PropTypes.func,\n  usePortal: PropTypes.bool,\n};\n\nexport default DSOverlay;\n","/* eslint-disable max-lines */\n/* eslint-disable react/prop-types */\nimport React, { PureComponent } from 'react';\nimport { Popper } from 'react-popper';\nimport { Keyframes, animated } from 'react-spring/renderprops.cjs';\nimport getComponentFromProps from '@elliemae/ds-utilities/getComponentFromProps';\nimport DSOverlay from '../Overlay';\nimport { getArrowStylesBySize } from './getArrowStylesBySize';\n\nconst Content = Keyframes.Spring({});\n\nexport default class PopperContent extends PureComponent {\n  // eslint-disable-next-line react/static-property-placement\n  static defaultProps = { onContentDestroyed: () => null };\n\n  constructor(props) {\n    super(props);\n    this.renderContent = this.renderContent.bind(this);\n    this.renderArrow = this.renderArrow.bind(this);\n    this.handleRestAnimation = this.handleRestAnimation.bind(this);\n  }\n\n  handleRestAnimation() {\n    const { isOpen, onContentDestroyed } = this.props;\n    if (!isOpen) {\n      onContentDestroyed();\n    }\n  }\n\n  renderArrow({ ref, style }, placement) {\n    const { blockName, showArrow } = this.props;\n    if (!showArrow) return null;\n    return (\n      <div\n        key=\"popper-arrow\"\n        ref={ref}\n        className={`${blockName || 'popper'}__arrow`}\n        data-placement={placement}\n        style={{\n          ...style,\n          ...getArrowStylesBySize(placement, 25),\n        }}\n      >\n        <svg viewBox=\"0 0 30 30\">\n          <path\n            className=\"stroke\"\n            d=\"M23.7,27.1L17,19.9C16.5,19.3,15.8,19,15,19s-1.6,0.3-2.1,0.9l-6.6,7.2C5.3,28.1,3.4,29,2,29h26\n        C26.7,29,24.6,28.1,23.7,27.1z\"\n          />\n          <path\n            className=\"fill\"\n            d=\"M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z\"\n          />\n        </svg>\n      </div>\n    );\n  }\n\n  renderContent({ ref, style, placement, arrowProps, scheduleUpdate }) {\n    const {\n      contentComponent,\n      contentStyle,\n      isOpen,\n      closeAnimationConfig,\n      openAnimationConfig,\n      onMouseEnter,\n      onMouseLeave,\n      containerProps,\n      zIndex,\n    } = this.props;\n\n    const computedStyle = {\n      ...style,\n      ...contentStyle,\n      zIndex,\n    };\n    return (\n      <div\n        {...containerProps}\n        data-placement={placement}\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n        style={computedStyle}\n        data-testid=\"popper-container\"\n      >\n        <Content\n          native\n          onRest={this.handleRestAnimation}\n          state={isOpen ? 'open' : 'close'}\n          states={{\n            open: {\n              ...openAnimationConfig,\n              from: closeAnimationConfig.to,\n            },\n            close: closeAnimationConfig,\n          }}\n        >\n          {(animationStyle) => (\n            <animated.div ref={ref} style={animationStyle}>\n              {getComponentFromProps(contentComponent, { scheduleUpdate }, [\n                this.renderArrow(arrowProps, placement),\n              ])}\n            </animated.div>\n          )}\n        </Content>\n      </div>\n    );\n  }\n\n  render() {\n    const {\n      destroyed = false,\n      onClickOutside = () => null,\n      placement = 'bottom-start',\n      modifiers = {},\n      referenceNode,\n      usePortal = true,\n    } = this.props;\n    return (\n      <DSOverlay\n        isOpen={!destroyed}\n        onClickOutside={onClickOutside}\n        usePortal={usePortal}\n      >\n        <Popper\n          modifiers={modifiers}\n          placement={placement}\n          referenceElement={referenceNode}\n        >\n          {this.renderContent}\n        </Popper>\n      </DSOverlay>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\n// TODO change hardcoded opacity for theme variable\nconst BackdropTag = styled.div`\n  ${({ type }) =>\n    type === 'cover' ? 'position: fixed' : 'position: absolute'};\n\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: black;\n  opacity: 0.6;\n  ${(props) => (props.zIndex ? `z-index: ${props.zIndex};` : '')}\n`;\n\nconst Backdrop = ({ type = 'cover', zIndex, onClick = () => null }) => (\n  <BackdropTag\n    zIndex={zIndex}\n    type={type}\n    onClick={onClick}\n    data-testid=\"ds-backdrop\"\n  />\n);\nBackdrop.propTypes = {\n  /**\n   * ['cover', 'fill']\n   */\n  type: PropTypes.oneOf(['fill', 'cover']),\n  /**\n   * z-index of dimmer background\n   */\n  zIndex: PropTypes.number,\n  /**\n   * Backdrop click event\n   */\n  onClick: PropTypes.func,\n};\n\nexport default Backdrop;\n","/* eslint-disable max-lines */\nimport React, { Component } from 'react';\nimport getComponentFromProps from '@elliemae/ds-utilities/getComponentFromProps';\nimport { Manager, Reference } from 'react-popper';\nimport memoizeOne from 'memoize-one';\nimport { isDOMTypeElement } from '@elliemae/ds-utilities/reactTypesUtility';\nimport { isFunction, get, runAll } from '@elliemae/ds-utilities/utils';\nimport { mergeRefs } from '@elliemae/ds-utilities/system';\nimport PopperContent from './PopperContent';\nimport { Interaction } from './interaction';\n\nexport default class PopperImpl extends Component {\n  // we use safeIsMounted because isMounted is not allowed by React.\n  safeIsMounted = false;\n\n  handlePopperPlacementChange = memoizeOne(placement => {\n    const { onPlacementChange } = this.props;\n    onPlacementChange(placement);\n  });\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      destroyed: true,\n    };\n    // TODO: Fix the autobinding to remove this!!\n    this.handleMouseEnter = this.handleMouseEnter.bind(this);\n    this.handleMouseLeave = this.handleMouseLeave.bind(this);\n    this.handleTriggerClick = this.handleTriggerClick.bind(this);\n    this.renderTarget = this.renderTarget.bind(this);\n    this.updatePopoverState = this.updatePopoverState.bind(this);\n    this.handlePopperPlacementChange = this.handlePopperPlacementChange.bind(\n      this,\n    );\n    this.handleDestroyContent = this.handleDestroyContent.bind(this);\n    this.handleContentMouseEnter = this.handleContentMouseEnter.bind(this);\n    this.handleContentMouseLeave = this.handleContentMouseLeave.bind(this);\n  }\n\n  // this is needed to prevent setState on unmounted components\n  componentDidMount() {\n    this.safeIsMounted = true;\n  }\n\n  componentDidUpdate() {\n    const { isOpen, destroyed } = this.state;\n    if (isOpen === true && destroyed === true) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({ destroyed: false });\n    }\n  }\n\n  componentWillUnmount() {\n    this.safeIsMounted = false;\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { isOpen } = nextProps;\n    const { prevPropIsOpen } = prevState;\n    // todo: this causes multiple rerenders\n    if (isOpen !== prevPropIsOpen) {\n      return {\n        isOpen,\n        prevPropIsOpen: isOpen,\n      };\n    }\n    return null;\n  }\n\n  getInteractionObject(interaction, referenceProps = {}) {\n    const { isOpen } = this.props;\n    if (isOpen !== undefined) return {};\n    return (\n      {\n        [Interaction.CLICK]: {\n          handlers: {\n            onClick: this.handleTriggerClick,\n          },\n          canClose: () => true,\n        },\n        [Interaction.HOVER]: {\n          handlers: {\n            onMouseEnter: referenceProps.onMouseEnter || this.handleMouseEnter,\n            onMouseLeave: referenceProps.onMouseLeave || this.handleMouseLeave,\n            onClick: this.handleTriggerClick,\n          },\n          canClose: (isOnTrigger, isOnPopper) => !isOnTrigger && !isOnPopper,\n        },\n      }[interaction] || {\n        handlers: {},\n        canClose: () => true,\n      }\n    );\n  }\n\n  setOpen(opening) {\n    const { onOpen } = this.props;\n    const { prevPropIsOpen } = this.state;\n    if (!this.safeIsMounted) return;\n\n    if (prevPropIsOpen === undefined) {\n      this.setState({\n        isOpen: opening,\n        destroyed: false,\n      });\n    }\n    onOpen(opening);\n  }\n\n  open() {\n    clearTimeout(this.closeTimer);\n    const { delayOpen } = this.props;\n    this.openTimer = setTimeout(() => this.setOpen(true), delayOpen);\n  }\n\n  close() {\n    clearTimeout(this.openTimer);\n    const { delayClose, onClose = () => null } = this.props;\n    this.closeTimer = setTimeout(() => {\n      this.setOpen(false);\n      onClose();\n    }, delayClose);\n  }\n\n  handleTriggerClick(e) {\n    const { triggerComponent } = this.props;\n    const { onClick } = get(triggerComponent, 'props') || {};\n\n    this.open();\n\n    if (isFunction(onClick)) onClick(e);\n  }\n\n  handleContentMouseEnter() {\n    this.isMouseOverContent = true;\n  }\n\n  handleContentMouseLeave() {\n    this.isMouseOverContent = false;\n    const { onClose = () => null } = this.props;\n    setTimeout(() => {\n      if (!this.isMouseOverTarget) {\n        this.setOpen(false);\n        onClose();\n      }\n    }, 10);\n  }\n\n  handleMouseEnter() {\n    this.isMouseOverTarget = true;\n    this.open();\n  }\n\n  handleMouseLeave() {\n    this.isMouseOverTarget = false;\n    setTimeout(() => {\n      if (!this.isMouseOverContent) {\n        this.close();\n      }\n    }, 10);\n  }\n\n  updatePopoverState(popperData) {\n    this.handlePopperPlacementChange(popperData.placement);\n    return popperData;\n  }\n\n  handleDestroyContent() {\n    this.setState({ destroyed: true });\n  }\n\n  renderTarget({ ref }) {\n    const { isOpen } = this.state;\n    const { triggerComponent, interactionType, renderReference } = this.props;\n\n    const componentInnerRef = get(\n      triggerComponent,\n      ['props', 'innerRef'],\n      () => null,\n    );\n    const compRef = isDOMTypeElement(triggerComponent)\n      ? { ref }\n      : { innerRef: mergeRefs(ref, componentInnerRef) };\n\n    const triggerHandler = this.getInteractionObject(\n      interactionType,\n      triggerComponent.props,\n    ).handlers;\n\n    const targetProps = {\n      ...triggerHandler,\n      ...compRef,\n      'aria-haspopup': true,\n      'aria-expanded': isOpen,\n    };\n\n    if (renderReference) {\n      return renderReference({\n        ref,\n        ...targetProps,\n      });\n    }\n\n    return getComponentFromProps(triggerComponent, targetProps);\n  }\n\n  render() {\n    const { isOpen, destroyed } = this.state;\n\n    const {\n      placement,\n      interactionType,\n      showArrow,\n      arrowSize,\n      arrowGap,\n      preventOverflow,\n      children: customPopper,\n      usePortal,\n      blockName,\n      contentComponent,\n      openAnimationConfig,\n      closeAnimationConfig,\n      modifiers,\n      referenceNode,\n      containerProps,\n      zIndex,\n    } = this.props;\n\n    const allModifiers = {\n      offset: {\n        enabled: showArrow,\n        offset: `0, ${arrowSize + arrowGap}`,\n      },\n      preventOverflow: {\n        enabled: true,\n        padding: 0,\n        boundariesElement: preventOverflow,\n      },\n      updatePopoverState: {\n        enabled: true,\n        fn: this.updatePopoverState,\n        order: 900,\n      },\n      ...modifiers,\n    };\n    const triggerHandler = this.getInteractionObject(interactionType).handlers;\n\n    const popperContentProps = {\n      containerProps,\n      isOpen,\n      destroyed: isOpen ? false : destroyed,\n      arrowSize,\n      blockName,\n      showArrow,\n      modifiers: allModifiers,\n      contentComponent,\n      onContentDestroyed: this.handleDestroyContent,\n      onClickOutside: () => this.close(),\n      placement,\n      usePortal,\n      openAnimationConfig,\n      closeAnimationConfig,\n      onMouseEnter:\n        interactionType === Interaction.HOVER\n          ? this.handleContentMouseEnter\n          : undefined,\n      onMouseLeave:\n        interactionType === Interaction.HOVER\n          ? this.handleContentMouseLeave\n          : undefined,\n      referenceNode,\n      zIndex,\n    };\n\n    if (customPopper && typeof customPopper === 'function') {\n      return (\n        <Manager>\n          {customPopper({\n            Reference,\n            triggerHandler,\n            content: <PopperContent {...popperContentProps} />,\n          })}\n        </Manager>\n      );\n    }\n\n    return (\n      <Manager>\n        <Reference>{this.renderTarget}</Reference>\n        <PopperContent {...popperContentProps} />\n      </Manager>\n    );\n  }\n}\n\nexport { Reference, PopperContent };\n"],"sourceRoot":""}