{"version":3,"sources":["DataGrid/customHooks/useInputSearch.js","DataGrid/customHooks/useFilters.js"],"names":["useInputSearch","initialSearchText","filters","setFilters","inputProps","onSearch","searchOnKeyUp","useState","updateSearch","setUpdateSearch","searchInputValue","setSearchInputValue","reRenderSearch","value","clearSearch","handleSearch","useCallback","key","trim","onKeyUp","target","searchProps","shouldUpdateSearch","useFilters","data","baseFilter","label","group","operator","val","unionBy","disabled","length","onRemoveFilter","_","filter","f","some","onClearFilters","renderFilterToolbar","buttonType","labelText","onClick"],"mappings":"oLAaO,MAAMA,EAAiB,EAC5BC,oBAAoB,GACpBC,UAAU,GACVC,aACAC,aAAa,GACbC,WACAC,iBAAgB,MACX,MAAD,EACoCC,mBAAS,GAD7C,mBACGC,EADH,KACiBC,EADjB,OAE4CF,mBAC9CN,GAHE,mBAEGS,EAFH,KAEqBC,EAFrB,KAKEC,EAAiB,IAAMH,EAAiBI,GAAUA,EAAQ,GAC1DC,EAAc,IAAMH,EAAoBV,GACxCc,EAAeC,sBACnB,EAAGH,QAAOI,UACHJ,EAAMK,QAIXb,EAASQ,GACLP,EAAeK,EAAoBE,GAClCC,KALS,cAARG,GAAqBd,EAAWD,IAOxC,CAACM,IAEGW,EAAUH,sBACd,EAAGI,QAAUP,SAASI,UACpB,GAAY,UAARA,EAAiBL,SAChB,IAAKN,EAAe,OACzBS,EAAa,CAAEF,QAAOI,SAExB,CAACF,IAGH,MAAO,CACLM,YAAY,2BACPjB,GADM,IAETe,UACAd,SAAUU,EACVF,MAAOH,IAETY,mBAAoBd,EACpBA,aAAcI,EACdE,iB,+ICpDG,MAAMS,EAAa,CACxBC,EACAC,EAAa,CAAEC,MAAO,OAAQC,MAAO,OAAQC,SAAU,eACnD,MAAD,EAC2BrB,mBAAS,IADpC,mBACIL,EADJ,KACaC,EADb,KAEGE,EAAYwB,IAChB,MAAMhB,EAAuB,kBAARgB,EAAmBA,EAAMA,EAAIhB,MAClDV,EAAW2B,kBAAQ5B,EAAS,CAAC,2BAAKuB,GAAN,IAAkBZ,WAAU,WAJvD,EAMgDb,yBAAe,CAChEE,UACAC,aACAE,WACAD,WAAY,CAAE2B,UAAWP,EAAKQ,UAJxBX,EANL,EAMKA,YAAaP,EANlB,EAMkBA,YAAaN,EAN/B,EAM+BA,aAM5ByB,EAAiBjB,sBACrB,CAACkB,EAAGL,KACF1B,EAAWD,EAAQiC,OAAQC,GAAMA,EAAEvB,QAAUgB,IACzC3B,EAAQmC,KAAMD,GAAMA,EAAEvB,QAAUQ,EAAYR,QAC9CC,IAEFN,KAEF,CAACM,EAAaZ,EAASmB,EAAYR,MAAOL,IAEtC8B,EAAiBtB,sBAAY,KACjCb,EAAW,IACXW,IACAN,KACC,CAACM,EAAaN,IACX+B,EAAsBvB,sBAC1B,IACE,kBAAC,IAAD,CACEwB,WAAW,OACXC,UAAU,QACVC,QAASJ,IAGb,CAACA,IAEH,MAAO,CACLpC,UACA+B,iBACAK,iBACAC,sBACAlC","file":"static/js/59.f644144f.chunk.js","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport { useState, useCallback } from 'react';\n\n/**\n * Provides reusable search functionality\n *\n * @param data.initialSearchText\n * @param data.filters\n * @param data.setFilters\n * @param data.inputProps\n * @param data.onSearch\n * @param data.searchOnKeyUp\n */\nexport const useInputSearch = ({\n  initialSearchText = '',\n  filters = [],\n  setFilters,\n  inputProps = {},\n  onSearch,\n  searchOnKeyUp = false,\n}) => {\n  const [updateSearch, setUpdateSearch] = useState(0); // Allows to update filters in real time\n  const [searchInputValue, setSearchInputValue] = useState(\n    initialSearchText,\n  );\n  const reRenderSearch = () => setUpdateSearch((value) => value + 1);\n  const clearSearch = () => setSearchInputValue(initialSearchText);\n  const handleSearch = useCallback(\n    ({ value, key }) => {\n      if (!value.trim()) {\n        if (key === 'Backspace') setFilters(filters);\n        return;\n      }\n      onSearch(value);\n      if (searchOnKeyUp) setSearchInputValue(value);\n      else clearSearch();\n    },\n    [updateSearch],\n  );\n  const onKeyUp = useCallback(\n    ({ target: { value }, key }) => {\n      if (key === 'Enter') reRenderSearch();\n      else if (!searchOnKeyUp) return;\n      handleSearch({ value, key });\n    },\n    [handleSearch],\n  );\n\n  return {\n    searchProps: {\n      ...inputProps,\n      onKeyUp,\n      onSearch: handleSearch,\n      value: searchInputValue,\n    },\n    shouldUpdateSearch: updateSearch,\n    updateSearch: reRenderSearch,\n    clearSearch,\n  };\n};\n","import React, { useState, useCallback } from 'react';\nimport { unionBy } from 'lodash';\nimport DSButton from '@elliemae/ds-basic/Button';\nimport { useInputSearch } from './useInputSearch';\n\nexport const useFilters = (\n  data,\n  baseFilter = { label: 'Name', group: 'name', operator: 'contains' },\n) => {\n  const [filters, setFilters] = useState([]);\n  const onSearch = (val) => {\n    const value = typeof val === 'string' ? val : val.value; // dimsum's API is inconsistent\n    setFilters(unionBy(filters, [{ ...baseFilter, value }], 'value'));\n  };\n  const { searchProps, clearSearch, updateSearch } = useInputSearch({\n    filters,\n    setFilters,\n    onSearch,\n    inputProps: { disabled: !data.length },\n  });\n  const onRemoveFilter = useCallback(\n    (_, val) => {\n      setFilters(filters.filter((f) => f.value !== val));\n      if (filters.some((f) => f.value === searchProps.value)) {\n        clearSearch();\n      }\n      updateSearch();\n    },\n    [clearSearch, filters, searchProps.value, updateSearch],\n  );\n  const onClearFilters = useCallback(() => {\n    setFilters([]);\n    clearSearch();\n    updateSearch();\n  }, [clearSearch, updateSearch]);\n  const renderFilterToolbar = useCallback(\n    () => (\n      <DSButton\n        buttonType=\"text\"\n        labelText=\"CLEAR\"\n        onClick={onClearFilters}\n      />\n    ),\n    [onClearFilters],\n  );\n  return {\n    filters,\n    onRemoveFilter,\n    onClearFilters,\n    renderFilterToolbar,\n    onSearch,\n  };\n};\n"],"sourceRoot":""}